
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>Surface Area 3D plugin</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2020-02-14"><meta name="DC.source" content="SurfaceArea3D_help.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>Surface Area 3D plugin</h1><!--introduction--><p>This plugin was designed for calculation of planar surface areas from 3D datasets (see an image below)</p><p><b>Features:</b></p><div><ul><li>Detection of 3D objects using 26 points connectivity</li><li>For each of the detected 3D object the plugin calculates its surface area, which is defined from the centerlines of each cross section</li><li>Export results and resulting surfaces to Matlab, Imaris, Amira or save as CSV, Excel spreadsheets or Matlab binary structure file</li><li>Visualize the surfaces in Matlab</li></ul></div><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">Parameters</a></li><li><a href="#3">How to Use:</a></li><li><a href="#4">Credits and Acknowledgements</a></li><li><a href="#5">How to cite</a></li></ul></div><p><img vspace="5" hspace="5" src="SurfaceArea3D_overview.jpg" alt=""> </p><h2 id="2">Parameters</h2><p>
<ul>
<li><b>Material with surfaces</b> - select material from which the objects have
to be detected and analysed. The object detection is done in 3D using the 26-edge connectivity, the surfaces are generated for separately for each of the detected objects</li>
<li><b>XY smoothing</b> - each profile of the detected 3D object is thinned to a
single centerline and the points of that centerline are detected. Coordinates of the
detected points may be smoothed using this smoothing factor</li>
<li><b>XY sampling</b> - to generate the surface the detected points are
triangulated, the <em>XY sampling</em> parameter allows to increase size of
triangles by skipping points. When <em>XY sampling</em> is 3, each 3rd of the
detected points will be used for triangulation</li>
<li><b>Z sampling</b> - similar to <em>XY sampling</em>, but applied to the Z-dimensions</li>
<li><b>show points</b> - the detected points are displayed as the <em>Selection</em>
layer in MIB, which gives an easy way to check the points. <b>Important:</b>
remember to clear the <em>Selection</em> layer after the check (<code><em>Shift+C</em></code> shortcut), otherwise you
may accidentally add/subtract those areas to/from the model!</li>
<li><b>Export results to Matlab</b> - generate a structure in Matlab with the
following fields:
<ul>
<li><em>.pixSize</em>, contains info about pixel size of the dataset (first element only). To access it type: <code>SurfaceArea(1).pixSize</code></li>
<li><em>.MaterialName</em>, name of the analysed material (first element only). To access it type: <code>SurfaceArea(1).MaterialName</code></li>
<li><em>.xySmoothValue</em>, smoothing in XY (first element only)</li>
<li><em>.xySamplingStep</em>, xy sampling value (first element only)</li>
<li><em>.zSamplingStep</em>, z sampling value (first element only)</li>
<li><em>.SumAreaTotal</em>, the total area of each contact. To access it type: <code>SurfaceArea(N).SumAreaTotal</code>, where N should be replaced with index of the surface</li>
<li><em>.PointsVector</em>, indices of the detected points for each profile as .PointsVector{SliceId}{IndexOfProfile}[x,y,z]</li>
<li><em>.PointCloud</em>, matrix with all detected points as [index of the point](x,y,z)</li>
<li><em>.Centroid</em>, coordinates of centroids for each object</li>
<li><em>.Area</em> area between each z and z+1 slices, as a cell array, where z is defined from the first slice of the object</li>
</ul>
</li>
<li><b>Save results in Matlab, Excel or CSV format</b> - specify filename to save the results; use the <em>Filename for export</em> button or an editbox below to provide it</li>
<li><b>add material name</b> - add name of the processed material to the filename</li>
<li><b>generate a model for each contact</b> - specify a folder to save generated surfaces in AmiraMesh format</li>
<li><b>Export contacts to Imaris</b> - export contact surfaces to Imaris, requires Imaris version 8 and ImarisXT connection</li>
</ul>
</p><h2 id="3">How to Use:</h2><p>An example shows the general use of the plugin: the contacts between mitochondria and ER are automatically generated from two materials and measured.</p><p>Normally, the preferrable way is to draw the contact with a mouse rather than use this automatic procedure, since the automatic way may result "bad" profiles as on the image above.</p><p>Link to youtube.com video: <a href="https://youtu.be/z0jxNHIOipA">&lt;https://youtu.be/z0jxNHIOipA</a>&gt;, please note that the plugin in the video named as ContactArea3D and demonstrates application of the plugin for analysis of contacts between organelles.</p><p>Link to the dataset: <a href="http://mib.helsinki.fi/tutorials/3D_Modeling_files/Huh7.tif">&lt;http://mib.helsinki.fi/tutorials/3D_Modeling_files/Huh7.tif</a>&gt;</p><p>Link to the model: <a href="http://mib.helsinki.fi/tutorials/3D_Modeling_files/Labels_Huh.model">&lt;http://mib.helsinki.fi/tutorials/3D_Modeling_files/Labels_Huh.model</a>&gt;</p><p>Usage of this plugin is also explained in <a href="https://andreapaterlini.github.io/Plasmodesmata_dist_wall/surfaces.html#run_the_surfacearea3d_plugin">this work</a></p><h2 id="4">Credits and Acknowledgements</h2><p>
 Written by Ilya Belevich, University of Helsinki<br>
 version 1.00, 13.02.2020<br>
 email: <a href="mailto:ilya.belevich @ helsinki.fi">ilya.belevich @ helsinki.fi</a><br>
 web: <a href="https://www.mv.helsinki.fi/home/ibelev">https://www.mv.helsinki.fi/home/ibelev</a><br>
</p><p><b>Big thanks to David Legland (Institut National de la Recherche Agronomique, France) for discussion about triangulation of points: function mibTriangulateCurvePair.m is based on triangulateCurvePair.m from <a href="https://github.com/mattools/matGeom/releases">MatGeom tools</a> by David Legland</b></p><h2 id="5">How to cite</h2><p>If you used this code please cite it as</p><p>Paterlini A., Belevich I., Jokitalo E., Helariutta Y., Novel computational approaches to study plasmodesmata and their environment. <b>Journal name</b>,</p><p><a href="https://andreapaterlini.github.io/Plasmodesmata_dist_wall/index.html">&lt;https://andreapaterlini.github.io/Plasmodesmata_dist_wall/index.html</a>&gt;</p><p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% Surface Area 3D plugin  
% This plugin was designed for calculation of planar surface areas from 3D
% datasets (see an image below)
% 
% *Features:*
%
%
% * Detection of 3D objects using 26 points connectivity
% * For each of the detected 3D object the plugin calculates its surface area, which is defined from the centerlines of each cross section
% * Export results and resulting surfaces to Matlab, Imaris, Amira or save as CSV, Excel spreadsheets or Matlab binary structure file
% * Visualize the surfaces in Matlab 
%
%
%%
%
% 
% <<SurfaceArea3D_overview.jpg>>
%
%% Parameters
%
% 
% <html>
% <ul>
% <li><b>Material with surfaces</b> - select material from which the objects have
% to be detected and analysed. The object detection is done in 3D using the 26-edge connectivity, the surfaces are generated for separately for each of the detected objects</li>
% <li><b>XY smoothing</b> - each profile of the detected 3D object is thinned to a
% single centerline and the points of that centerline are detected. Coordinates of the
% detected points may be smoothed using this smoothing factor</li>
% <li><b>XY sampling</b> - to generate the surface the detected points are
% triangulated, the <em>XY sampling</em> parameter allows to increase size of
% triangles by skipping points. When <em>XY sampling</em> is 3, each 3rd of the
% detected points will be used for triangulation</li>
% <li><b>Z sampling</b> - similar to <em>XY sampling</em>, but applied to the Z-dimensions</li>
% <li><b>show points</b> - the detected points are displayed as the <em>Selection</em>
% layer in MIB, which gives an easy way to check the points. <b>Important:</b>
% remember to clear the <em>Selection</em> layer after the check (<code><em>Shift+C</em></code> shortcut), otherwise you
% may accidentally add/subtract those areas to/from the model!</li>
% <li><b>Export results to Matlab</b> - generate a structure in Matlab with the
% following fields:
% <ul>
% <li><em>.pixSize</em>, contains info about pixel size of the dataset (first element only). To access it type: <code>SurfaceArea(1).pixSize</code></li>
% <li><em>.MaterialName</em>, name of the analysed material (first element only). To access it type: <code>SurfaceArea(1).MaterialName</code></li>
% <li><em>.xySmoothValue</em>, smoothing in XY (first element only)</li>
% <li><em>.xySamplingStep</em>, xy sampling value (first element only)</li>
% <li><em>.zSamplingStep</em>, z sampling value (first element only)</li>
% <li><em>.SumAreaTotal</em>, the total area of each contact. To access it type: <code>SurfaceArea(N).SumAreaTotal</code>, where N should be replaced with index of the surface</li>
% <li><em>.PointsVector</em>, indices of the detected points for each profile as .PointsVector{SliceId}{IndexOfProfile}[x,y,z]</li>
% <li><em>.PointCloud</em>, matrix with all detected points as [index of the point](x,y,z)</li>
% <li><em>.Centroid</em>, coordinates of centroids for each object</li>
% <li><em>.Area</em> area between each z and z+1 slices, as a cell array, where z is defined from the first slice of the object</li>
% </ul>
% </li>
% <li><b>Save results in Matlab, Excel or CSV format</b> - specify filename to save the results; use the <em>Filename for export</em> button or an editbox below to provide it</li> 
% <li><b>add material name</b> - add name of the processed material to the filename</li>
% <li><b>generate a model for each contact</b> - specify a folder to save generated surfaces in AmiraMesh format</li>
% <li><b>Export contacts to Imaris</b> - export contact surfaces to Imaris, requires Imaris version 8 and ImarisXT connection</li>
% </ul>
% </html>
%
%
%% How to Use:
%
% An example shows the general use of the plugin: the contacts between mitochondria and ER are
% automatically generated from two materials and measured.
% 
% Normally, the
% preferrable way is to draw the contact with a mouse rather than use this
% automatic procedure, since the automatic way may result "bad" profiles as
% on the image above.
%
% 
% Link to youtube.com video: <https://youtu.be/z0jxNHIOipA
% https://youtu.be/z0jxNHIOipA>, please note that the plugin in the video
% named as ContactArea3D and demonstrates application of the plugin for
% analysis of contacts between organelles.
%
% Link to the dataset: <http://mib.helsinki.fi/tutorials/3D_Modeling_files/Huh7.tif http://mib.helsinki.fi/tutorials/3D_Modeling_files/Huh7.tif>
%
% Link to the model: <http://mib.helsinki.fi/tutorials/3D_Modeling_files/Labels_Huh.model http://mib.helsinki.fi/tutorials/3D_Modeling_files/Labels_Huh.model>
%
% Usage of this plugin is also explained in <https://andreapaterlini.github.io/Plasmodesmata_dist_wall/surfaces.html#run_the_surfacearea3d_plugin this work>
%
%% Credits and Acknowledgements
%
% <html>
%  Written by Ilya Belevich, University of Helsinki<br>
%  version 1.00, 13.02.2020<br>
%  email: <a href="mailto:ilya.belevich @ helsinki.fi">ilya.belevich @ helsinki.fi</a><br>
%  web: <a href="https://www.mv.helsinki.fi/home/ibelev">https://www.mv.helsinki.fi/home/ibelev</a><br>
% </html>
%
% *Big thanks to David Legland (Institut National de la Recherche
% Agronomique, France) for discussion about triangulation of points: function
% mibTriangulateCurvePair.m is based on triangulateCurvePair.m from
% <https://github.com/mattools/matGeom/releases MatGeom tools> by David Legland*
%
%% How to cite
% 
% If you used this code please cite it as
%
% Paterlini A., Belevich I., Jokitalo E., Helariutta Y., Novel
% computational approaches to study plasmodesmata and their environment.
% *Journal name*, 
%
% <https://andreapaterlini.github.io/Plasmodesmata_dist_wall/index.html https://andreapaterlini.github.io/Plasmodesmata_dist_wall/index.html> 
%
##### SOURCE END #####
--></body></html>